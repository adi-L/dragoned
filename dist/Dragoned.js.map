{"version":3,"file":"Dragoned.js","mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;;ACVAA,8EAAA;;;;;;;;;;;;ACAA,IAAMI,cAAc,GAAG,EAAvB;AACA,+DAAeA,cAAf;;;;;;;;;;;;;;;;;;;;;;;;;ACDA;AAEA;AACA;AACA;AACA;;IAEqBI;AACnB,oBAAYC,SAAZ,EAAqC;AAAA,QAAdC,OAAc,uEAAJ,EAAI;;AAAA;;AACnC,QAAI,OAAOD,SAAP,KAAqB,QAAzB,EAAmC;AACjCA,MAAAA,SAAS,GAAGE,QAAQ,CAACC,aAAT,CAAuBH,SAAvB,CAAZ;AACD;;AACD,QAAI,CAACA,SAAD,IAAc,CAACA,SAAD,YAAsBI,WAAxC,EAAqD;AACnD,aAAO,IAAIC,KAAJ,CAAU,wDAAV,CAAP;AACD;;AACD,SAAKC,eAAL;AACA,SAAKC,SAAL,GAAiB,KAAKA,SAAL,CAAeC,IAAf,CAAoB,IAApB,CAAjB;AACA,SAAKC,WAAL,GAAmB,KAAKA,WAAL,CAAiBD,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKE,SAAL,GAAiB,KAAKA,SAAL,CAAeF,IAAf,CAAoB,IAApB,CAAjB;AACA,SAAKR,SAAL,GAAiBA,SAAjB;AACA,SAAKW,KAAL,GAAa,CAAb;AACA,SAAKC,WAAL,CAAiBX,OAAjB;AACAN,IAAAA,4DAAA,CAAoB,IAApB;AACA,SAAKmB,IAAL;AACD;;;;WACD,qBAAYb,OAAZ,EAAqB;AACnB,WAAKA,OAAL,GAAe;AACbc,QAAAA,SAAS,EAAEd,OAAO,CAACc,SADN;AAEbC,QAAAA,MAAM,EAAEf,OAAO,CAACe,MAFH;AAGbC,QAAAA,KAAK,EAAEhB,OAAO,CAACgB,KAHF;AAIbC,QAAAA,cAAc,EAAEjB,OAAO,CAACiB,cAJX;AAKbC,QAAAA,SAAS,EAAElB,OAAO,CAACkB,SALN;AAMbC,QAAAA,OAAO,EAAEnB,OAAO,CAACmB,OANJ;AAObC,QAAAA,MAAM,EAAEpB,OAAO,CAACoB,MAPH;AAQbC,QAAAA,KAAK,EAAErB,OAAO,CAACqB,KARF;AASbC,QAAAA,IAAI,EAAEtB,OAAO,CAACsB,IAAR,IAAgBrB,QAAQ,CAACqB,IATlB;AAUbC,QAAAA,KAAK,EAAEvB,OAAO,CAACuB,KAVF;AAWbC,QAAAA,KAAK,EAAExB,OAAO,CAACwB,KAXF;AAYbC,QAAAA,IAAI,EAAEzB,OAAO,CAACyB;AAZD,OAAf;AAcD;;;WAED,2BAAkB;AAChB,WAAKC,SAAL,GAAiBzB,QAAQ,CAAC0B,aAAT,CAAuB,KAAvB,CAAjB;AACA,WAAKD,SAAL,CAAeE,SAAf,GAA2B,iCAA3B;AACA,WAAKF,SAAL,CAAeG,KAAf,CAAqBC,QAArB,GAAgC,UAAhC;AACA,WAAKJ,SAAL,CAAeG,KAAf,CAAqBE,YAArB;AACA,WAAKL,SAAL,CAAeG,KAAf,CAAqBG,eAArB,GAAuC,kBAAvC;AACD;;;WAED,gBAAO;AACL,WAAKC,QAAL,CAAc,KAAKlC,SAAnB;AACD;;;WACD,qBAAY;AACV,UAAI,KAAKmC,MAAT,EAAiB;AACf,aAAKA,MAAL,CAAYC,MAAZ;AACA,aAAKD,MAAL,GAAc,IAAd;AACD;;AAED,WAAKE,MAAL,CAAYP,KAAZ,CAAkBQ,OAAlB,GAA4B,CAA5B;AACA,WAAKX,SAAL,CAAeS,MAAf;AACA,WAAKT,SAAL,CAAeG,KAAf,CAAqBS,IAArB,aAA+B,CAAC,IAAhC;AACA,WAAKZ,SAAL,CAAeG,KAAf,CAAqBU,GAArB,aAA8B,CAAC,IAA/B;AACAtC,MAAAA,QAAQ,CAACuC,mBAAT,CAA6B,WAA7B,EAA0C,KAAKhC,WAA/C;AACAP,MAAAA,QAAQ,CAACuC,mBAAT,CAA6B,SAA7B,EAAwC,KAAK/B,SAA7C;;AACA,UAAI,KAAKS,SAAL,IAAkB,KAAKuB,MAA3B,EAAmC;AACjC,YAAMC,WAAW,GAAG,KAAK1C,OAAL,CAAauB,KAAb,KAAuB,IAAvB,GAA8B,KAAKa,MAAL,CAAYO,SAAZ,CAAsB,IAAtB,CAA9B,GAA4D,KAAKP,MAArF;AACA,aAAKK,MAAL,CAAYG,qBAAZ,CAAkC,KAAK1B,SAAvC,EAAkDwB,WAAlD;AACA,YAAMG,EAAE,GAAG,KAAKJ,MAAL,CAAYK,qBAAvB;AACA,YAAMC,IAAI,GAAG,KAAKhD,SAAlB;AACA,aAAKiD,QAAL,GAAgBC,KAAK,CAACC,SAAN,CAAgBC,OAAhB,CAAwBC,IAAxB,CAA6BP,EAAE,CAACQ,QAAhC,EAA0CX,WAA1C,CAAhB;AAEA,eAAO,KAAKN,MAAL,CAAYU,qBAAnB;AACA,eAAO,KAAKV,MAAL,CAAYU,qBAAnB;;AAEA,YAAI,OAAO,KAAK9C,OAAL,CAAaqB,KAApB,KAA8B,UAAlC,EAA8C;AAC5C,eAAKrB,OAAL,CAAaqB,KAAb,CAAmB;AACjBiC,YAAAA,IAAI,EAAEZ,WADW;AAEjBG,YAAAA,EAAE,EAAFA,EAFiB;AAGjBE,YAAAA,IAAI,EAAJA,IAHiB;AAIjBC,YAAAA,QAAQ,EAAE,KAAKA,QAJE;AAKjBO,YAAAA,QAAQ,EAAE,KAAKA;AALE,WAAnB;AAOD;AACF;AAEF;;;WACD,qBAAYC,KAAZ,EAAmB;AAAA;;AACjBA,MAAAA,KAAK,CAACvC,cAAN;;AACA,UAAIuC,KAAK,CAACC,IAAN,KAAe,WAAf,IAA8B,CAAC9D,qEAAgB,CAAC6D,KAAD,CAAnD,EAA4D;AAC1D,aAAK9B,SAAL,CAAeS,MAAf;AACAlC,QAAAA,QAAQ,CAACuC,mBAAT,CAA6B,WAA7B,EAA0C,KAAKhC,WAA/C;AACD;;AACD,UAAMkD,OAAO,GAAGF,KAAK,CAACC,IAAN,KAAe,WAAf,GAA6BD,KAAK,CAACG,OAAN,CAAc,CAAd,EAAiBD,OAA9C,GAAwDF,KAAK,CAACE,OAA9E;AACA,UAAME,OAAO,GAAGJ,KAAK,CAACC,IAAN,KAAe,WAAf,GAA6BD,KAAK,CAACG,OAAN,CAAc,CAAd,EAAiBC,OAA9C,GAAwDJ,KAAK,CAACI,OAA9E;AACA,UAAMC,KAAK,GAAGL,KAAK,CAACC,IAAN,KAAe,WAAf,GAA6BD,KAAK,CAACG,OAAN,CAAc,CAAd,EAAiBE,KAA9C,GAAsDL,KAAK,CAACK,KAA1E;;AACA,UAAIH,OAAO,GAAG,KAAKhD,KAAnB,EAA0B;AACxB,aAAKoD,cAAL,GAAsB,KAAtB;AACD,OAFD,MAEO,IAAIJ,OAAO,GAAG,KAAKhD,KAAnB,EAA0B;AAC/B,aAAKoD,cAAL,GAAsB,QAAtB;AACD;;AACD,WAAKpD,KAAL,GAAagD,OAAb;;AACA,UAAMK,QAAQ,GAAG,SAAXA,QAAW;AAAA,eAAMC,MAAM,CAACC,QAAP,CAAgB;AACrC1B,UAAAA,GAAG,EAAEyB,MAAM,CAACE,OAAP,GAAiB,CADe;AAErC5B,UAAAA,IAAI,EAAE;AAF+B,SAAhB,CAAN;AAAA,OAAjB;;AAIA,UAAM6B,YAAY,GAAG,SAAfA,YAAe;AAAA,eAAMH,MAAM,CAACC,QAAP,CAAgB;AACzC1B,UAAAA,GAAG,EAAEyB,MAAM,CAACE,OAAP,GAAiB,CADmB;AAEzC5B,UAAAA,IAAI,EAAE;AAFmC,SAAhB,CAAN;AAAA,OAArB;;AAIA,UAAM8B,QAAQ,GAAG,SAAXA,QAAW,GAAM;AACrB,YAAI,KAAI,CAAClC,MAAL,IAAe,KAAI,CAACxB,KAAL,GAAa,GAA5B,IAAmC,KAAI,CAACoD,cAAL,KAAwB,KAA/D,EAAsE;AACpEC,UAAAA,QAAQ;AACRM,UAAAA,UAAU,CAAC,YAAM;AACfD,YAAAA,QAAQ;AACT,WAFS,EAEP,GAFO,CAAV;AAGD,SALD,MAKO,IAAI,KAAI,CAAClC,MAAL,IAAe8B,MAAM,CAACM,WAAP,GAAqB,KAAI,CAAC5D,KAA1B,GAAkC,GAAjD,IAAwD,KAAI,CAACoD,cAAL,KAAwB,QAApF,EAA8F;AACnGK,UAAAA,YAAY;AACZE,UAAAA,UAAU,CAAC,YAAM;AACfD,YAAAA,QAAQ;AACT,WAFS,EAEP,GAFO,CAAV;AAGD;AACF,OAZD;;AAaAA,MAAAA,QAAQ;;AACR,UAAI,KAAKlC,MAAL,IAAe,KAAKE,MAAxB,EAAgC;AAC9B,aAAKF,MAAL,CAAYL,KAAZ,CAAkBS,IAAlB,aAA4BsB,OAAO,GAAG3D,QAAQ,CAACqB,IAAT,CAAciD,UAAxB,GAAqC,KAAKrC,MAAL,CAAYsC,SAA7E;AACA,aAAKtC,MAAL,CAAYL,KAAZ,CAAkBU,GAAlB,aAA2BmB,OAAO,GAAGzD,QAAQ,CAACqB,IAAT,CAAcmD,SAAxB,GAAoC,KAAKvC,MAAL,CAAYwC,SAA3E;AACA,aAAKxC,MAAL,CAAYL,KAAZ,CAAkB8C,OAAlB,GAA4B,MAA5B;AACD;;AACD,UAAMC,OAAO,GAAG3E,QAAQ,CAAC4E,gBAAT,CAA0BjB,OAA1B,EAAmCF,OAAnC,CAAhB,CA1CiB,CA2CjB;;;AACA,UAAIjB,MAAJ;AACA,UAAIqC,YAAJ;;AACA,WAAK,IAAIC,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGrF,8DAA5B,EAAmDqF,KAAK,EAAxD,EAA4D;AAC1D,YAAME,OAAO,GAAGvF,uDAAc,CAACqF,KAAD,CAA9B;AACA,YAAMG,SAAS,GAAGtF,sEAAiB,CAACqF,OAAO,CAAClF,SAAT,EAAoB6E,OAApB,CAAnC;;AACA,YAAIM,SAAJ,EAAe;AACbJ,UAAAA,YAAY,GAAGG,OAAf;AACAxC,UAAAA,MAAM,GAAGyC,SAAT;AACAzC,UAAAA,MAAM,CAACK,qBAAP,GAA+BmC,OAAO,CAAClF,SAAvC;AACA;AACD;AACF;;AACD,UAAI,KAAKmC,MAAT,EAAiB;AACf,aAAKA,MAAL,CAAYL,KAAZ,CAAkB8C,OAAlB,GAA4B,OAA5B;AACD;;AACD,UAAIlC,MAAM,IAAIA,MAAM,KAAK,KAAKL,MAA9B,EAAsC;AACpC,YAAI0C,YAAY,CAAC9E,OAAb,CAAqByB,IAArB,KAA8B,KAAlC,EAAyC;AACvC;AACD;;AACD,YAAI,OAAO,KAAKzB,OAAL,CAAaoB,MAApB,KAA+B,UAAnC,EAA+C;AAC7C,eAAKpB,OAAL,CAAaoB,MAAb,CAAoB;AAClBkC,YAAAA,IAAI,EAAE,KAAKlB,MADO;AAElBS,YAAAA,EAAE,EAAEiC,YAAY,CAAC/E,SAFC;AAGlBgD,YAAAA,IAAI,EAAE,KAAKhD,SAHO;AAIlBiD,YAAAA,QAAQ,EAAEC,KAAK,CAACC,SAAN,CAAgBC,OAAhB,CAAwBC,IAAxB,CAA6B0B,YAAY,CAAC/E,SAAb,CAAuBsD,QAApD,EAA8DZ,MAA9D,CAJQ;AAKlBc,YAAAA,QAAQ,EAAEN,KAAK,CAACC,SAAN,CAAgBC,OAAhB,CAAwBC,IAAxB,CAA6B,KAAKrD,SAAL,CAAesD,QAA5C,EAAsD,KAAKjB,MAA3D;AALQ,WAApB;AAOD;;AACD,aAAKA,MAAL,CAAYP,KAAZ,CAAkBQ,OAAlB,GAA4B,GAA5B;AACA,aAAKX,SAAL,CAAeG,KAAf,CAAqBQ,OAArB,GAA+B,CAA/B;AACA,YAAM8C,IAAI,GAAG1C,MAAM,CAAC2C,qBAAP,EAAb;AACA,aAAK1D,SAAL,CAAeG,KAAf,CAAqBwD,KAArB,aAAgCF,IAAI,CAACE,KAArC;AACA,aAAK3D,SAAL,CAAeG,KAAf,CAAqByD,MAArB,GAA8B,KAA9B,CAjBoC,CAkBpC;;AACA,YAAIH,IAAI,CAACI,MAAL,GAAc,KAAK7E,KAAnB,IAA4ByE,IAAI,CAACI,MAAL,GAAcJ,IAAI,CAACG,MAAL,GAAc,CAA5B,GAAgC,KAAK5E,KAArE,EAA4E;AAC1E,eAAKQ,SAAL,GAAiB,UAAjB;AACA,eAAKuB,MAAL,GAAcA,MAAd;AACA,eAAKL,MAAL,GAAc,KAAKA,MAAnB;AACA,eAAKV,SAAL,CAAeG,KAAf,CAAqBU,GAArB,aAA8BsB,KAAK,GAAGA,KAAR,GAAgBG,MAAM,CAACwB,WAAvB,GAC1BL,IAAI,CAAC5C,GADqB,GACf4C,IAAI,CAACG,MADpB;AAEA,eAAK5D,SAAL,CAAeG,KAAf,CAAqBS,IAArB,aAA+B6C,IAAI,CAAC7C,IAApC;AACD,SAPD,MAOO,IAAI6C,IAAI,CAAC5C,GAAL,GAAW,KAAK7B,KAAhB,IAAyByE,IAAI,CAAC5C,GAAL,GAAW4C,IAAI,CAACG,MAAL,GAAc,CAAzB,GAA6B,KAAK5E,KAA/D,EAAsE;AAC3E,eAAK+B,MAAL,GAAcA,MAAd;AACA,eAAKvB,SAAL,GAAiB,aAAjB;AACA,eAAKQ,SAAL,CAAeG,KAAf,CAAqBU,GAArB,aAA8BsB,KAAK,GAAGA,KAAR,GAAgBG,MAAM,CAACwB,WAAvB,GAC1BL,IAAI,CAAC5C,GADT;AAEA,eAAKb,SAAL,CAAeG,KAAf,CAAqBS,IAArB,aAA+B6C,IAAI,CAAC7C,IAApC;AACD;AACF,OAjCD,MAiCO;AACL,aAAKZ,SAAL,CAAeG,KAAf,CAAqBQ,OAArB,GAA+B,GAA/B;AACD;AACF;;;WAED,mBAAUmB,KAAV,EAAiB;AACf,UAAIA,KAAK,CAACC,IAAN,KAAe,WAAf,IAA8B,CAAC9D,qEAAgB,CAAC6D,KAAD,CAAnD,EAA4D;AAC1D;AACD;;AACDvD,MAAAA,QAAQ,CAACqB,IAAT,CAAcmE,WAAd,CAA0B,KAAK/D,SAA/B;AACA,UAAMgC,OAAO,GAAGF,KAAK,CAACC,IAAN,KAAe,YAAf,GAA8BD,KAAK,CAACG,OAAN,CAAc,CAAd,EAAiBD,OAA/C,GAAyDF,KAAK,CAACE,OAA/E;AACA,UAAME,OAAO,GAAGJ,KAAK,CAACC,IAAN,KAAe,YAAf,GAA8BD,KAAK,CAACG,OAAN,CAAc,CAAd,EAAiBC,OAA/C,GAAyDJ,KAAK,CAACI,OAA/E;AACA,UAAM8B,MAAM,GAAGlC,KAAK,CAACkC,MAArB;AACA,UAAIC,WAAJ;AACA,UAAIC,QAAJ;;AACA,UAAI,KAAK5F,OAAL,CAAac,SAAjB,EAA4B;AAC1B6E,QAAAA,WAAW,GAAGD,MAAM,CAACG,OAAP,CAAe,KAAK7F,OAAL,CAAac,SAA5B,CAAd;;AACA,YAAI,CAAC6E,WAAL,EAAkB;AAAC;AAAQ;AAC5B;;AACD,UAAI,KAAK3F,OAAL,CAAae,MAAjB,EAAyB;AACvB6E,QAAAA,QAAQ,GAAGF,MAAM,CAACG,OAAP,CAAe,KAAK7F,OAAL,CAAae,MAA5B,CAAX;;AACA,YAAI,CAAC6E,QAAL,EAAe;AAAC;AAAQ;AACzB;;AACD,UAAMxD,MAAM,GAAGxC,sEAAiB,CAAC,KAAKG,SAAN,EAAiB2F,MAAjB,CAAhC;;AACA,UAAI,CAACtD,MAAL,EAAa;AAAC;AAAQ;;AACtB,UAAI,CAAC,KAAKF,MAAV,EAAkB;AAChB,aAAKA,MAAL,GAAcrC,sEAAiB,CAACuC,MAAD,EAASwB,OAAT,EAAkBF,OAAlB,CAA/B;AACD;;AACD,UAAI,OAAO,KAAK1D,OAAL,CAAamB,OAApB,KAAgC,UAApC,EAAgD;AAC9C,aAAKnB,OAAL,CAAamB,OAAb,CAAqB;AACnB4B,UAAAA,IAAI,EAAE,KAAKhD,SADQ;AAEnBwD,UAAAA,QAAQ,EAAE,KAAKA,QAFI;AAGnBD,UAAAA,IAAI,EAAElB;AAHa,SAArB;AAKD;;AACD,WAAKA,MAAL,GAAcA,MAAd;AACA,WAAKA,MAAL,CAAYU,qBAAZ,GAAoC,KAAK/C,SAAzC;AACA,WAAKwD,QAAL,GAAgBN,KAAK,CAACC,SAAN,CAAgBC,OAAhB,CAAwBC,IAAxB,CAA6B,KAAKrD,SAAL,CAAesD,QAA5C,EAAsDjB,MAAtD,CAAhB;AACAnC,MAAAA,QAAQ,CAAC6F,gBAAT,CAA0B,WAA1B,EAAuC,KAAKtF,WAA5C;AACAP,MAAAA,QAAQ,CAAC6F,gBAAT,CAA0B,WAA1B,EAAuC,KAAKtF,WAA5C,EAAyD;AAAEuF,QAAAA,OAAO,EAAE;AAAX,OAAzD;AACA9F,MAAAA,QAAQ,CAAC6F,gBAAT,CAA0B,SAA1B,EAAqC,KAAKrF,SAA1C;AACAR,MAAAA,QAAQ,CAAC6F,gBAAT,CAA0B,UAA1B,EAAsC,KAAKrF,SAA3C;AAED;;;WAED,kBAASV,SAAT,EAAoB;AAClBA,MAAAA,SAAS,CAAC8B,KAAV,CAAgBmE,UAAhB,GAA6B,MAA7B;AACAjG,MAAAA,SAAS,CAAC+F,gBAAV,CAA2B,WAA3B,EAAwC,KAAKxF,SAA7C;AACAP,MAAAA,SAAS,CAAC+F,gBAAV,CAA2B,YAA3B,EAAyC,KAAKxF,SAA9C;AACD;;;WACD,mBAAU;AAAA;;AACR,UAAMyE,KAAK,GAAGrF,iEAAA,CAAyB,UAAAwG,CAAC;AAAA,eAAIA,CAAC,KAAK,MAAV;AAAA,OAA1B,CAAd;;AACA,UAAInB,KAAK,KAAK,CAAC,CAAf,EAAkB;AAChBrF,QAAAA,8DAAA,CAAsBqF,KAAtB,EAA6B,CAA7B;AACD;;AACD,WAAKhF,SAAL,CAAeyC,mBAAf,CAAmC,WAAnC,EAAgD,KAAKlC,SAArD;AACA,WAAKP,SAAL,CAAeyC,mBAAf,CAAmC,YAAnC,EAAiD,KAAKlC,SAAtD;;AACA,UAAI,KAAK4B,MAAT,EAAiB;AACf,aAAKA,MAAL,CAAYC,MAAZ;AACD;;AACD,UAAI,KAAKT,SAAT,EAAoB;AAClB,aAAKA,SAAL,CAAeS,MAAf;AACD;AACF;;;;;;;;;;;;;;;;;;;;;AClPY,SAASxC,gBAAT,CAA0ByG,GAA1B,EAA+B;AAC5CA,EAAAA,GAAG,GAAGA,GAAG,IAAIpC,MAAM,CAACR,KAApB;;AACA,MAAI,aAAa4C,GAAjB,EAAsB;AACpB,WAAOA,GAAG,CAACC,OAAJ,KAAgB,CAAvB;AACD;;AACD,MAAIC,MAAM,GAAGF,GAAG,CAACG,KAAJ,IAAaH,GAAG,CAACE,MAA9B;AACA,SAAOA,MAAM,KAAK,CAAlB;AACD;;;;;;;;;;;;;;;;ACPD;AAEe,SAAS1G,iBAAT,CAA2B6G,UAA3B,EAAuCf,MAAvC,EAA+C;AAC5D,MAAIR,SAAS,GAAGQ,MAAhB,CAD4D,CAE5D;;AACA,SAAOR,SAAS,IAAIA,SAAS,KAAKuB,UAA3B,IAAyCvB,SAAzC,IAAsDsB,sDAAS,CAACtB,SAAD,CAAT,KAAyBuB,UAAtF,EAAkG;AAChGvB,IAAAA,SAAS,GAAGsB,sDAAS,CAACtB,SAAD,CAArB;AACD;;AACD,MAAIA,SAAS,KAAKjF,QAAQ,CAACqB,IAA3B,EAAiC;AAC/B,WAAO,IAAP;AACD;;AACD,MAAIoE,MAAM,KAAKe,UAAf,EAA2B;AACzB,WAAO,IAAP;AACD;;AACD,SAAOvB,SAAP;AACD;;;;;;;;;;;;ACfD,IAAMsB,SAAS,GAAG,SAAZA,SAAY,CAAAE,EAAE;AAAA,SAAIA,EAAE,IAAIA,EAAE,CAACC,UAAH,KAAkB1G,QAAQ,CAACqB,IAAjC,GAAwC,IAAxC,GAA+CoF,EAAE,IAAIA,EAAE,CAACC,UAA5D;AAAA,CAApB;;AACA,+DAAeH,SAAf;;;;;;;;;;;;ACDA,SAAS3G,iBAAT,CAA2BuC,MAA3B,EAAmCwB,OAAnC,EAA4CF,OAA5C,EAAqD;AACnD,MAAI,CAACtB,MAAL,EAAa;AACX;AACD;;AACD,MAAI+C,IAAI,GAAG/C,MAAM,CAACgD,qBAAP,EAAX;;AACA,MAAMwB,OAAO,GAAGxE,MAAM,CAACO,SAAP,CAAiB,IAAjB,CAAhB;;AACAiE,EAAAA,OAAO,CAAC/E,KAAR,CAAcC,QAAd,GAAyB,OAAzB;;AACA8E,EAAAA,OAAO,CAACC,SAAR,CAAkBC,GAAlB,CAAsB,QAAtB;;AACAF,EAAAA,OAAO,CAAC/E,KAAR,CAAcQ,OAAd,GAAwB,GAAxB;AACAuE,EAAAA,OAAO,CAAC/E,KAAR,CAAcwD,KAAd,aAAyBF,IAAI,CAACE,KAA9B;AACAuB,EAAAA,OAAO,CAAC/E,KAAR,CAAcyD,MAAd,aAA0BH,IAAI,CAACG,MAA/B;AACAsB,EAAAA,OAAO,CAAC/E,KAAR,CAAcU,GAAd,aAAuB4C,IAAI,CAAC5C,GAA5B;AACAqE,EAAAA,OAAO,CAAC/E,KAAR,CAAcS,IAAd,aAAwB6C,IAAI,CAAC7C,IAA7B;AACAsE,EAAAA,OAAO,CAACpC,SAAR,GAAoBZ,OAAO,GAAGuB,IAAI,CAAC7C,IAAnC;AACAsE,EAAAA,OAAO,CAAClC,SAAR,GAAoBhB,OAAO,GAAGyB,IAAI,CAAC5C,GAAnC,CAdmD,CAenD;;AACAtC,EAAAA,QAAQ,CAACqB,IAAT,CAAcmE,WAAd,CAA0BmB,OAA1B;AACA,SAAOA,OAAP;AACD;;AACD,+DAAe/G,iBAAf;;;;;;UCnBA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA,8CAA8C;;;;;WCA9C;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;UENA;UACA;UACA;UACA","sources":["webpack://Dragoned/webpack/universalModuleDefinition","webpack://Dragoned/./index.js","webpack://Dragoned/./src/containerStack.js","webpack://Dragoned/./src/index.js","webpack://Dragoned/./src/scripts/detectLeftButton.js","webpack://Dragoned/./src/scripts/getImmediateChild.js","webpack://Dragoned/./src/scripts/getParent.js","webpack://Dragoned/./src/scripts/renderMirrorImage.js","webpack://Dragoned/webpack/bootstrap","webpack://Dragoned/webpack/runtime/define property getters","webpack://Dragoned/webpack/runtime/hasOwnProperty shorthand","webpack://Dragoned/webpack/runtime/make namespace object","webpack://Dragoned/webpack/before-startup","webpack://Dragoned/webpack/startup","webpack://Dragoned/webpack/after-startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Dragoned\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Dragoned\"] = factory();\n\telse\n\t\troot[\"Dragoned\"] = factory();\n})((typeof self !== 'undefined' ? self : this), function() {\nreturn ","module.exports = require('./src').default;\n","const containerStack = [];\r\nexport default containerStack;\r\n","/* eslint-disable no-console */\r\n\r\nimport detectLeftButton from './scripts/detectLeftButton';\r\nimport getImmediateChild from './scripts/getImmediateChild';\r\nimport renderMirrorImage from './scripts/renderMirrorImage';\r\nimport containerStack from './containerStack';\r\n\r\nexport default class Dragoned {\r\n  constructor(container, options = {}) {\r\n    if (typeof container === 'string') {\r\n      container = document.querySelector(container);\r\n    }\r\n    if (!container || !container instanceof HTMLElement) {\r\n      return new Error('Dragoned: container must be a string or an HTMLElement');\r\n    }\r\n    this.createGuideLine();\r\n    this.dragStart = this.dragStart.bind(this);\r\n    this.onMouseMove = this.onMouseMove.bind(this);\r\n    this.onMouseUp = this.onMouseUp.bind(this);\r\n    this.container = container;\r\n    this.moveY = 0;\r\n    this.optionsInit(options);\r\n    containerStack.push(this);\r\n    this.init();\r\n  }\r\n  optionsInit(options) {\r\n    this.options = {\r\n      draggable: options.draggable,\r\n      handle: options.handle,\r\n      color: options.color,\r\n      preventDefault: options.preventDefault,\r\n      direction: options.direction,\r\n      onStart: options.onStart,\r\n      onMove: options.onMove,\r\n      onEnd: options.onEnd,\r\n      body: options.body || document.body,\r\n      clone: options.clone,\r\n      group: options.group,\r\n      sort: options.sort\r\n    };\r\n  }\r\n\r\n  createGuideLine() {\r\n    this.guideLine = document.createElement('div');\r\n    this.guideLine.className = '__sortable_draggable-guide-line';\r\n    this.guideLine.style.position = 'absolute';\r\n    this.guideLine.style.borderRadius = `.5rem`;\r\n    this.guideLine.style.backgroundColor = 'rgb(70, 25, 194)';\r\n  }\r\n\r\n  init() {\r\n    this.bindDrag(this.container);\r\n  }\r\n  onMouseUp() {\r\n    if (this.mirror) {\r\n      this.mirror.remove();\r\n      this.mirror = null;\r\n    }\r\n\r\n    this.dragEl.style.opacity = 1;\r\n    this.guideLine.remove();\r\n    this.guideLine.style.left = `${-9999}px`;\r\n    this.guideLine.style.top = `${-9999}px`;\r\n    document.removeEventListener('mousemove', this.onMouseMove);\r\n    document.removeEventListener('mouseup', this.onMouseUp);\r\n    if (this.direction && this.dropEl) {\r\n      const droppableEl = this.options.clone === true ? this.dragEl.cloneNode(true) : this.dragEl;\r\n      this.dropEl.insertAdjacentElement(this.direction, droppableEl);\r\n      const to = this.dropEl.Sortable__container__;\r\n      const from = this.container;\r\n      this.newIndex = Array.prototype.indexOf.call(to.children, droppableEl);\r\n\r\n      delete this.dragEl.Sortable__container__;\r\n      delete this.dragEl.Sortable__container__;\r\n\r\n      if (typeof this.options.onEnd === 'function') {\r\n        this.options.onEnd({\r\n          item: droppableEl,\r\n          to,\r\n          from,\r\n          newIndex: this.newIndex,\r\n          oldIndex: this.oldIndex\r\n        });\r\n      }\r\n    }\r\n\r\n  }\r\n  onMouseMove(event) {\r\n    event.preventDefault();\r\n    if (event.type === 'mousemove' && !detectLeftButton(event)) {\r\n      this.guideLine.remove();\r\n      document.removeEventListener('mousemove', this.onMouseMove);\r\n    }\r\n    const clientY = event.type === 'touchmove' ? event.touches[0].clientY : event.clientY;\r\n    const clientX = event.type === 'touchmove' ? event.touches[0].clientX : event.clientX;\r\n    const pageY = event.type === 'touchmove' ? event.touches[0].pageY : event.pageY;\r\n    if (clientY < this.moveY) {\r\n      this.mouseDirection = 'top';\r\n    } else if (clientY > this.moveY) {\r\n      this.mouseDirection = 'bottom';\r\n    }\r\n    this.moveY = clientY;\r\n    const scrollUp = () => window.scrollTo({\r\n      top: window.scrollY - 1,\r\n      left: 0\r\n    });\r\n    const scrollBottom = () => window.scrollTo({\r\n      top: window.scrollY + 1,\r\n      left: 0\r\n    });\r\n    const scroller = () => {\r\n      if (this.mirror && this.moveY < 100 && this.mouseDirection === 'top') {\r\n        scrollUp();\r\n        setTimeout(() => {\r\n          scroller();\r\n        }, 100);\r\n      } else if (this.mirror && window.innerHeight - this.moveY < 100 && this.mouseDirection === 'bottom') {\r\n        scrollBottom();\r\n        setTimeout(() => {\r\n          scroller();\r\n        }, 100);\r\n      }\r\n    };\r\n    scroller();\r\n    if (this.mirror && this.dragEl) {\r\n      this.mirror.style.left = `${clientX - document.body.offsetLeft - this.mirror.__offsetX}px`;\r\n      this.mirror.style.top = `${clientY - document.body.offsetTop - this.mirror.__offsetY}px`;\r\n      this.mirror.style.display = 'none';\r\n    }\r\n    const _target = document.elementFromPoint(clientX, clientY);\r\n    // here\r\n    let dropEl;\r\n    let dropInstance;\r\n    for (let index = 0; index < containerStack.length; index++) {\r\n      const current = containerStack[index];\r\n      const immediate = getImmediateChild(current.container, _target);\r\n      if (immediate) {\r\n        dropInstance = current;\r\n        dropEl = immediate;\r\n        dropEl.Sortable__container__ = current.container;\r\n        break;\r\n      }\r\n    }\r\n    if (this.mirror) {\r\n      this.mirror.style.display = 'block';\r\n    }\r\n    if (dropEl && dropEl !== this.dragEl) {\r\n      if (dropInstance.options.sort === false) {\r\n        return;\r\n      }\r\n      if (typeof this.options.onMove === 'function') {\r\n        this.options.onMove({\r\n          item: this.dragEl,\r\n          to: dropInstance.container,\r\n          from: this.container,\r\n          newIndex: Array.prototype.indexOf.call(dropInstance.container.children, dropEl),\r\n          oldIndex: Array.prototype.indexOf.call(this.container.children, this.dragEl)\r\n        });\r\n      }\r\n      this.dragEl.style.opacity = 0.2;\r\n      this.guideLine.style.opacity = 1;\r\n      const rect = dropEl.getBoundingClientRect();\r\n      this.guideLine.style.width = `${rect.width}px`;\r\n      this.guideLine.style.height = '4px';\r\n      // is mouse is on the top of the element\r\n      if (rect.bottom > this.moveY && rect.bottom - rect.height / 2 < this.moveY) {\r\n        this.direction = 'afterend';\r\n        this.dropEl = dropEl;\r\n        this.dragEl = this.dragEl;\r\n        this.guideLine.style.top = `${pageY - pageY + window.pageYOffset\r\n          + rect.top + rect.height}px`;\r\n        this.guideLine.style.left = `${rect.left}px`;\r\n      } else if (rect.top < this.moveY && rect.top + rect.height / 2 > this.moveY) {\r\n        this.dropEl = dropEl;\r\n        this.direction = 'beforebegin';\r\n        this.guideLine.style.top = `${pageY - pageY + window.pageYOffset\r\n          + rect.top}px`;\r\n        this.guideLine.style.left = `${rect.left}px`;\r\n      }\r\n    } else {\r\n      this.guideLine.style.opacity = 0.2;\r\n    }\r\n  }\r\n\r\n  dragStart(event) {\r\n    if (event.type === 'mousedown' && !detectLeftButton(event)) {\r\n      return;\r\n    }\r\n    document.body.appendChild(this.guideLine);\r\n    const clientY = event.type === 'touchstart' ? event.touches[0].clientY : event.clientY;\r\n    const clientX = event.type === 'touchstart' ? event.touches[0].clientX : event.clientX;\r\n    const target = event.target;\r\n    let draggableEl;\r\n    let handleEl;\r\n    if (this.options.draggable) {\r\n      draggableEl = target.closest(this.options.draggable);\r\n      if (!draggableEl) {return;}\r\n    }\r\n    if (this.options.handle) {\r\n      handleEl = target.closest(this.options.handle);\r\n      if (!handleEl) {return;}\r\n    }\r\n    const dragEl = getImmediateChild(this.container, target);\r\n    if (!dragEl) {return;}\r\n    if (!this.mirror) {\r\n      this.mirror = renderMirrorImage(dragEl, clientX, clientY);\r\n    }\r\n    if (typeof this.options.onStart === 'function') {\r\n      this.options.onStart({\r\n        from: this.container,\r\n        oldIndex: this.oldIndex,\r\n        item: dragEl\r\n      });\r\n    }\r\n    this.dragEl = dragEl;\r\n    this.dragEl.Sortable__container__ = this.container;\r\n    this.oldIndex = Array.prototype.indexOf.call(this.container.children, dragEl);\r\n    document.addEventListener('mousemove', this.onMouseMove);\r\n    document.addEventListener('touchmove', this.onMouseMove, { passive: false });\r\n    document.addEventListener('mouseup', this.onMouseUp);\r\n    document.addEventListener('touchend', this.onMouseUp);\r\n\r\n  }\r\n\r\n  bindDrag(container) {\r\n    container.style.userSelect = 'none';\r\n    container.addEventListener('mousedown', this.dragStart);\r\n    container.addEventListener('touchstart', this.dragStart);\r\n  }\r\n  destroy() {\r\n    const index = containerStack.findIndex(c => c === this);\r\n    if (index !== -1) {\r\n      containerStack.splice(index, 1);\r\n    }\r\n    this.container.removeEventListener('mousedown', this.dragStart);\r\n    this.container.removeEventListener('touchstart', this.dragStart);\r\n    if (this.mirror) {\r\n      this.mirror.remove();\r\n    }\r\n    if (this.guideLine) {\r\n      this.guideLine.remove();\r\n    }\r\n  }\r\n}\r\n","export default function detectLeftButton(evt) {\r\n  evt = evt || window.event;\r\n  if ('buttons' in evt) {\r\n    return evt.buttons === 1;\r\n  }\r\n  let button = evt.which || evt.button;\r\n  return button === 1;\r\n}\r\n","import getParent from './getParent';\r\n\r\nexport default function getImmediateChild(dropTarget, target) {\r\n  let immediate = target;\r\n  // eslint-disable-next-line max-len\r\n  while (immediate && immediate !== dropTarget && immediate && getParent(immediate) !== dropTarget) {\r\n    immediate = getParent(immediate);\r\n  }\r\n  if (immediate === document.body) {\r\n    return null;\r\n  }\r\n  if (target === dropTarget) {\r\n    return null;\r\n  }\r\n  return immediate;\r\n}\r\n","const getParent = el => el && el.parentNode === document.body ? null : el && el.parentNode;\r\nexport default getParent;\r\n","function renderMirrorImage(dragEl, clientX, clientY) {\r\n  if (!dragEl) {\r\n    return;\r\n  }\r\n  let rect = dragEl.getBoundingClientRect();\r\n  const _mirror = dragEl.cloneNode(true);\r\n  _mirror.style.position = 'fixed';\r\n  _mirror.classList.add('mirror');\r\n  _mirror.style.opacity = 0.5;\r\n  _mirror.style.width = `${rect.width}px`;\r\n  _mirror.style.height = `${rect.height}px`;\r\n  _mirror.style.top = `${rect.top}px`;\r\n  _mirror.style.left = `${rect.left}px`;\r\n  _mirror.__offsetX = clientX - rect.left;\r\n  _mirror.__offsetY = clientY - rect.top;\r\n  // _mirror.style.transform = `translate(${Math.abs(clientX - rect.left - rect.width/2)}px, -${Math.abs(clientY - rect.top - rect.height / 2)}px)`;\r\n  document.body.appendChild(_mirror);\r\n  return _mirror;\r\n}\r\nexport default renderMirrorImage;\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","","// startup\n// Load entry module and return exports\n// This entry module used 'module' so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./index.js\");\n",""],"names":["module","exports","require","default","containerStack","detectLeftButton","getImmediateChild","renderMirrorImage","Dragoned","container","options","document","querySelector","HTMLElement","Error","createGuideLine","dragStart","bind","onMouseMove","onMouseUp","moveY","optionsInit","push","init","draggable","handle","color","preventDefault","direction","onStart","onMove","onEnd","body","clone","group","sort","guideLine","createElement","className","style","position","borderRadius","backgroundColor","bindDrag","mirror","remove","dragEl","opacity","left","top","removeEventListener","dropEl","droppableEl","cloneNode","insertAdjacentElement","to","Sortable__container__","from","newIndex","Array","prototype","indexOf","call","children","item","oldIndex","event","type","clientY","touches","clientX","pageY","mouseDirection","scrollUp","window","scrollTo","scrollY","scrollBottom","scroller","setTimeout","innerHeight","offsetLeft","__offsetX","offsetTop","__offsetY","display","_target","elementFromPoint","dropInstance","index","length","current","immediate","rect","getBoundingClientRect","width","height","bottom","pageYOffset","appendChild","target","draggableEl","handleEl","closest","addEventListener","passive","userSelect","findIndex","c","splice","evt","buttons","button","which","getParent","dropTarget","el","parentNode","_mirror","classList","add"],"sourceRoot":""}